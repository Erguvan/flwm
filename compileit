#!/bin/sh -e

CXXFLAGS="$CXXFLAGS `fltk-config --cxxflags`"
CXXFLAGS="$CXXFLAGS -Wall -ffunction-sections -fdata-sections"
LDFLAGS="$LDFLAGS `fltk-config --ldflags --use-images`"
LDFLAGS="$LDFLAGS -Wl,-gc-sections"

for C in *.C
do
	g++ $CXXFLAGS -Os -fno-exceptions -fno-rtti -c "$C"
done

g++ -o flwm *.o $CXXFLAGS $LDFLAGS
sstrip flwm
